# Netlify 자동 배포 설정

[build]
  command = "npm run build"
  publish = ".next"

[build.environment]
  NODE_VERSION = "20"
  NPM_FLAGS = "--legacy-peer-deps"

# Next.js는 별도 redirects 설정이 필요 없음 (자동 처리)
# Next.js 16은 자동으로 API routes를 Netlify Functions로 변환

# 함수 타임아웃 설정 (긴 작업을 위해)
[functions]
  node_bundler = "esbuild"
  included_files = [
    "lib/**",
    "app/api/**"
  ]

# 환경 변수는 Netlify 대시보드에서 설정해야 함
# Site settings > Environment variables

# 자동 배포 설정
[build.processing]
  skip_processing = false

[build.processing.css]
  bundle = true
  minify = true

[build.processing.js]
  bundle = true
  minify = true

[build.processing.html]
  pretty_urls = true

# 브랜치별 배포 설정
[[context.production.environment]]
  NODE_ENV = "production"

[[context.deploy-preview.environment]]
  NODE_ENV = "development"

[[context.branch-deploy.environment]]
  NODE_ENV = "development"

